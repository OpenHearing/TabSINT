<a href="#maincontent" class="skip-to-content">Skip to main content</a>
<header-view></header-view>

<!-- Body -->
<main id="maincontent">
  <div class="has-header">

    <!-- <div *ngIf="protocol.protocolTabsintOutdated" style="background-color:#F25858; color: white; padding: 20px; text-align: center;" (click)="link('builds')">
        This protocol requires a newer version of TabSINT. Press here to update to the latest version.
    </div> -->
    <!-- <div *ngIf="protocol.activeProtocol.protocolUsbCMissing" style="background-color:#F25858; color: white; padding: 20px; text-align: center;">
        This protocol requires the Essential USB-C headset. Please plug the headset in prior to beginning the exam.
    </div> -->

    <div class="questionbox exam-page">

      <div class="question">
  
        <!-- Change which template we show based on what "mode" the exam is in. -->
        <div [ngSwitch]="state.examState">
          <div *ngSwitchCase="ExamState.Ready">
            <exam-ready-view></exam-ready-view>
          </div>
          <div *ngSwitchCase="ExamState.NotReady">
            <exam-not-ready-view></exam-not-ready-view>
          </div>
          <div *ngSwitchCase="ExamState.Testing">
            <exam-testing-view></exam-testing-view>
          </div>
          <div *ngSwitchCase="ExamState.Finalized">
            <exam-finalized-view></exam-finalized-view>
          </div>
        </div>

      <!-- Debugging display. -->
      <debug-view></debug-view>

      <!-- add space for keyboard -->
      <div class="keyboard-spacer" [style]="adminService.keyboardStyle"></div>
  
      </div>
    </div>

  </div>
</main>

<!-- Active Task overlay -->
<!-- <active-tasks></active-tasks> -->



<!-- Footer (incl. buttons) -->
<nav class="navbar-fixed-bottom exam-footer">
    <div class="container-fluid">
      <div class="row response-buttons" *ngIf="state.examState===ExamState.Ready">
        <div class="col-6">
          <button id="help-btn" type="button"
                  class="btn btn-block btn-lg btn-default"
                  [ngClass]="(page.helpText)?'':'disabled custom-disabled'"
                  (click)="examService.help()">
            <span class="ion-help-circled"></span> {{'Help'|translate}}
          </button>
        </div>
        <div class="col-6">
          <button id="begin-btn" type="button"
                  class="btn btn-block btn-lg btn-primary"
                  (click)="examService.begin()"
                  *ngIf="state.examState===ExamState.Ready">
            {{'Begin'|translate}}
          </button>
        </div>
      </div>
      <div *ngIf="state.examState===ExamState.Testing">
        <div class="row response-buttons" *ngIf="(disk.debugMode && disk.adminSkipMode) || page.responseArea.enableSkip">
          <div class="col-4">
            <button id="help-btn" type="button"
                    class="btn btn-block btn-lg btn-default"
                    [ngClass]="(page.helpText)?'':'disabled custom-disabled'"
                    *ngIf="!page.enableBackButton"
                    (click)="examService.help()">
              <span class="ion-help-circled"></span> {{'Help'|translate}}
            </button>
            <button id="back-btn" type="button"
                class="btn btn-block btn-lg btn-default"
                [ngClass]="(page.canGoBack())?'':'disabled custom-disabled'"
                *ngIf="!!page.enableBackButton"
                (click)="examService.back()">
              <span class="ion-arrow-left"></span> {{'Back'|translate}}
            </button>
          </div>
          <div class="col-4">
            <button id="submit-btn" type="button"
                    class="btn btn-block btn-lg btn-primary"
                    (click)="examService.skip()">
              <span class="ion-arrow-right"></span> {{'Skip'|translate}}
            </button>
          </div>
          <div class="col-4">
            <button id="submit-btn" type="button"
                    class="btn btn-block btn-lg btn-primary"
                    [ngClass]="(page.isSubmittable)?'':'disabled custom-disabled'"
                    [disabled]= "!page.isSubmittable"
                    (click)="examService.closeAll(); examService.submit()">
                <div *ngIf="page.submitText"> {{page.submitText}}</div>
                <div *ngIf="page.submitText===undefined"> {{'Submit' | translate}}</div>
            </button>
          </div>
        </div>
        <div class="row response-buttons" *ngIf="!((disk.debugMode && disk.adminSkipMode) || page.responseArea.enableSkip)">
          <div class="col-6">
            <button id="help-btn" type="button"
                    class="btn btn-block btn-lg btn-default"
                    [ngClass]="(page.helpText)?'':'disabled custom-disabled'"
                    *ngIf="!page.enableBackButton"
                    (click)="examService.help()">
              <span class="ion-help-circled"></span> {{'Help'|translate}}
            </button>
            <button id="back-btn" type="button"
                class="btn btn-block btn-lg btn-default"
                [ngClass]="page.canGoBack() ? '' : 'disabled custom-disabled'"
                [disabled]= "!page.canGoBack()"
                *ngIf="!!page.enableBackButton"
                (click)="examService.back()">
              <span class="ion-arrow-left"></span> {{'Back'|translate}}
            </button>
          </div>
          <div class="col-6">
            <button id="submit-btn" type="button"
                    class="btn btn-block btn-lg btn-primary"
                    [ngClass]="(page.isSubmittable)?'':'disabled custom-disabled'"
                    [disabled]= "!page.isSubmittable"
                    (click)="examService.closeAll(); examService.submit()">
                <div *ngIf="page.submitText"> {{page.submitText}}</div>
                <div *ngIf="page.submitText===undefined"> {{'Submit' | translate}}</div>
            </button>
          </div>
        </div>
      </div>
      <div class="row response-buttons" *ngIf="state.examState===ExamState.Finalized">
        <div class="col-6">
          <button id="help-btn" type="button"
                  class="btn btn-block btn-lg btn-default"
                  [ngClass]="(page.helpText)?'':'disabled custom-disabled'"
                  (click)="examService.help()">
            <span class="ion-help-circled"></span> {{'Help'|translate}}
          </button>
        </div>
        <div class="col-6">
          <button id="reset-btn" type="button"
                  class="btn btn-block btn-lg btn-success"
                  (click)="examService.reset()"
                  *ngIf="state.examState===ExamState.Finalized"> {{'New Exam'|translate}}
          </button>
        </div>
      </div>
  
      <div class="row" style="margin-top: 30px;" *ngIf="!(page.hideProgressBar || state.examState === ExamState.Ready || state.examState === ExamState.Finalized)">
        <!-- <uib-progressbar *ngIf="!isString(results.state.progress.pctProgress)" value="results.state.progress.pctProgress"></uib-progressbar> -->
        <!-- <div *ngIf="isString(results.state.progress.pctProgress)" class="progress-words">
            {{results.state.progress.pctProgress}}
        </div> -->
        <div *ngIf="state.examProgress.pctProgress" class="progress-words">
        {{state.examProgress.pctProgress}}
        </div>
  
      </div>
    </div>
  </nav>
  