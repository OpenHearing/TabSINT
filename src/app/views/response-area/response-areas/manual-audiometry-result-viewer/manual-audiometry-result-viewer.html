<div *ngFor="let aD of audiogramData; let i=index">

  
  <h2 [textContent]="responses[i].questionMainText" *ngIf="responses[i].questionMainText"></h2>
  <p class="subtext pad-top" *ngIf="responses[i].questionSubText">{{responses[i].questionSubText}}</p>
  <p class="instructions" *ngIf="responses[i].instructionText">{{responses[i].instructionText}}</p>    

  <div class="audiometry-container">
    <audiogram [dataStruct]="aD"></audiogram>
    
    <!-- Results Table Section -->
    <!-- Left Ear Table -->
    <div class="ear-table left-ear">
      <h3 class="ear-title">Left</h3>
      <table class="results-table">
        <thead>
          <tr>
            <th>Frequency (kHz)</th>
            <th *ngFor="let freq of responses[i].frequencies">{{ freq }}</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Threshold (dB SPL)</td>
            <td *ngFor="let threshold of responses[i].leftThresholds">{{ threshold || '' }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Right Ear Table -->
    <div class="ear-table right-ear">
      <h3 class="ear-title">Right</h3>
      <table class="results-table">
        <thead>
          <tr>
            <th>Frequency (kHz)</th>
            <th *ngFor="let freq of responses[i].frequencies">{{ freq }}</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Threshold (dB SPL)</td>
            <td *ngFor="let threshold of responses[i].rightThresholds">{{ threshold || '' }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Legend Section -->
    <div class="legend">
      <p><strong>Legend:</strong></p>
      <p>DNC = Did not converge</p>
      <p>(x+) = Hearing potentially beyond the calibrated range</p>
      <p>(-x) = Hearing potentially better than the calibrated range</p>
    </div>
  </div>
</div>