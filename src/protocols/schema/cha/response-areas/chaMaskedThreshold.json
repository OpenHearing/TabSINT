{
  "description": "CHA - Masked Threshold exam",
  "properties": {
    "type": {
      "enum": [ "chaMaskedThreshold" ]
    },
    "skip": {
      "type": "boolean",
      "description": "Allows user to skip the response area",
      "default": false
    },
    "pause": {
      "type": "boolean",
      "description": "Allows user to pause the current CHA presentation.  Takes user back to beginning of the page, with the 'Start' button."
    },
    "autoSubmit": {
      "type": "boolean",
      "description": "Go straight to next page once this page is complete",
      "default": false
    },
    "autoBegin": {
      "type": "boolean",
      "description": "Go straight into exam, without having to press the 'Begin' button",
      "default": false
    },
    "examInstructions": {
      "type": "string",
      "description": "Replaces the top-level instruction text on the CHA exam pages (each page after starting page)"
    },
    "hideExamProperties": {
      "type": "string",
      "enum": ["before", "during", "always", "never"],
      "description": "Hide the parameters of the audiometry test (i.e. Frequency, Level, Ear) before and/or during a test.",
      "default": "never"
    },
    "measureBackground": {
        "type": "string",
        "description": "Select a method from the list below to measure background noise after an audiometry exam",
        "enum": ["ThirdOctaveBands"]
    },
    "examProperties": {
      "type": "object",
      "properties": {    
        "TestEar": {
          "type": "string",
          "enum": ["Left", "Right"],
          "description": "Test Ear. Test ear cannot be determined by OutputChannel since the bone oscillator output channel is used for both ears",
          "default": "Auto"
        },
        "ThresholdLE": {
          "type": "number",
          "description": "Left ear unmasked air conduction threshold output, in dB HL",
          "default": 20
        },
        "ThresholdRE": {
          "type": "number",
          "description": "Right ear unmasked air conduction threshold output, in dB HL",
          "default": 20
        },
        "ThresholdBC": {
          "type": "number",
          "description": "Unmasked bone conduction threshold output, in dB HL",
          "default": null
        },
        "F": {
          "type": "number",
          "description": "Frequency of the test signal (Hz)",
          "default": 1000,
          "minimum": 500,
          "maximum": 8000
        },
        "MaskingType": {
          "type": "string",
          "enum": ["Auto", "Optimized", "Plateau"],
          "description": "Masking method to apply",
          "default": "Auto"
        },  
        "StepSize": {
          "type": "number",
          "description": "Increment the signal level by this amount, in dB",
          "default": 5,
          "maximum": 10,
          "minimum": 1
        },
        "MaskingStepSize": {
          "type": "number",
          "description": "Increment the signal level by this amount, in dB",
          "default": 5,
          "maximum": 10,
          "minimum": 1
        },
        "TonePulseNumber": {
          "type": "integer",
          "description": "Total number of tones played for each pulse train",
          "default": 3,
          "maximum": 5,
          "minimum": 1
        },
        "PollingOffset": {
          "type": "integer",
          "description": "Period beyond last pulse where subject response still accepted, in ms.  Enforced on the CHA: PollingOffset <= MinISI <= MaxISI",
          "default": 600,
          "maximum": 2000,
          "minimum": 0
        },
        "OutputChannel": {
          "type": "string",
          "description": "Channel on which to output the test signal. Note the LINE channel must select the DAC opposing the MaskingChannel",
          "enum": ["HPL0", "HPR0", "LINEL0", "NONE LINEL0", "LINEL0 NONE"],
          "default": "HPL0"
        },
        "OE": {
          "type": "number",
          "description": "Occlusion effect to account for when the OutputChannel is set to the bone oscillator (LINEL0)",
          "default": 0,
          "minimum": 0,
          "maximum": 80
        },
        "UseWavMaskerFile": {
          "type": "boolean",
          "description": "If true, determine if a wav file exists for the masker output channel and other parameters.  If the wav file doesn't exist, return an error.  If false, generate the noise stimulus on the fly.",
          "default": false
        }

      }
    }
  }
}
